language: ruby
dist: bionic
env:
  global:
    - secure: TtRuZvlAm4Kkk4lIGD5am2r0vZESp7sTmikBATUYB80uQiTr73LtMc/WVg5Vn2ImFH6EUFdUxMFQCwLsV0Hjak+TsYeMZtPFhWjLMbGpoNjbdxcfVyoY4aNnUpejHQ0fhv5yE9+w/zGPaI+vr0LJAlRqAivCWN1D0X4bFVUkmeQyVuQ1LOdHD1oNQWmDHiNoVvVIFyQFaECqtNXZZ2sqn+f5j055hOP0aPD31ZBPVrM8NdjKxDVtXIcMKUanLu8t98pgNe6MSBooBMmno9zNZP2h+SV3YPr6XIdF/QYzIsWqYWqqE6d1typGrcGTJJMb2cD2E0TU8aKt/a/LCWhR4rcRq1MK1LrreJk1MgsTylpmnvLXXynDWaXj1ITbbJDlLecJXgBbuBv5tDOOe2TUR441ru1O0efDE8K3uUFNTJzzrST6NCXJ4BP3ZgBag7dowTjQDERQoSVO7eR9JVtAyvdDw9w3sKo+vFwySOgbgQ5T6hY6C2bbUpBaVH8kq+zkF3Y+AYUn+fJaRMtoJdXB8f7UPBJ06m/AZIc+ErCF5tmbF1YtoN0UozX1nBPUVlz0UUOUZsFh+WZ+pto/GI3dFXbCeFlKI3fK64SQH6gAVA4qaeSXtTL6Ez4fnktUnrVKauEk92MrcfD1UrNJxCHXnPs0e/fA6sN0zoHmg0qHing=
rvm:
- 2.6.2
- 2.7.1
cache:
  bundler: true
notifications:
  slack:
    secure: PMldiCSD2At8hh3/HwLg4rzczr9nPhAfcUO5msTm8/+1vOFvY8tEUqm7Ny84wv635X/Dhuk+YUd1MjfN72NG29N9RzJzEpWoQn2MHk83HflkhxPmr6kKOqeir1FnPb+X9pzJBatuz0PWd27QqEXjWIDdiGxs2udwtXpUGEKVLOfaqhYilbkDF96NCu3vZjdWBHAzP5x2lHEXs+meEkZ9P6iN89E//IpgAz6pbmA8oAgyW9UdIAWXEsjSmKGYja1dyPtYC/2Hu0P+1wB9qPZ9CsiA/r1ja7uRncOrst29My9K1aujY1BDIGCWHhcCddFu7ZYpDaDt26vQ4ZmNiFzh4/4nIswLlHyq5A4OKTxbFSVt0OG5BDLMKfl8nS+h28HeaS5VdOcu2aRI1TTkmeUSvVKejJ1IgWzROaACFy4YRD67r5d9l9yXMlU75yX90x+1UbF2nZC9ndsEDAjhiOWv59bUNJR0GnqEaUXO/OylBxUPJtdTRL4l10GFDZ1kV8eX/adIi12dwMyJwLFKLrjFX3dSvVgRwrGzhffoT67FvsTmlRoOEugkF6uP+o9y3ruKETaSx59/5yaXfKwEsXAaUAPOschjKQ+pKRYSDWCdBjWfVQU/9+zscQ3b1ihs1iyQwDIlbZdcolCknxkmn5MzzKqJXgGZDaLBaG5l2SGJ5M0=
before_install:
  - gem install bundler
  - bundle --version
before_script:
  - echo -e "build ruby version $TRAVIS_RUBY_VERSION"
  - if [ "$TRAVIS_RUBY_VERSION" = "2.6.2" ]; then export COVERAGE=true; fi
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ~/cc-test-reporter && chmod +x ~/cc-test-reporter
  - if [ "x$COVERAGE" = "xtrue" ]; then ~/cc-test-reporter before-build; fi
script: bundle exec rspec
after_script:
  - if [ "x$COVERAGE" = "xtrue" ]; then ~/cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT; fi
